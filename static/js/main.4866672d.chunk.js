(this.webpackJsonpxo_front=this.webpackJsonpxo_front||[]).push([[0],[,function(e,t,n){e.exports={element:"XOElement_element__1KEMr","element-appear":"XOElement_element-appear__1ES5B","element-appear-done":"XOElement_element-appear-done__WJCRD","element-appear-active":"XOElement_element-appear-active__136G1","element-exit":"XOElement_element-exit__1_0jh","element-exit-done":"XOElement_element-exit-done__6EZ22","element-exit-active":"XOElement_element-exit-active__2EGW7"}},function(e,t,n){e.exports={game:"XOGame_game__15uXp",container:"XOGame_container__1yCti",element:"XOGame_element__1MduJ","winner-element":"XOGame_winner-element__3AreA","game-info":"XOGame_game-info__2wluV",winner:"XOGame_winner__X4RP5",restart:"XOGame_restart__27bp6"}},,function(e,t,n){e.exports={app:"App_app__1tA9O",header:"App_header__14Wxn"}},,,function(e,t,n){e.exports={container:"XOField_container__3ahhw"}},,,function(e,t,n){e.exports=n(18)},,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(0),i=n.n(o),l=n(3),m=n.n(l),s=n(7),u=n.n(s),p=function(e){var t=e.width,n=e.height,a=e.renderElement,r={"--xo-game-width":t,"--xo-game-height":n},c=Array(t*n).fill(null).map((function(e,r){var c=r%n,o=Math.floor(r/t);return a(c,o)}));return i.a.createElement("div",{className:u.a.container,style:r},c)},_=n(21),f=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")},d=n(22),E=new Map;!function(e){e.Move="MOVE",e.Waiting="WAITING",e.Won="WON",e.Lose="LOSE"}(a||(a={})),function(e){e.X="x",e.O="o",e.N="n"}(r||(r={})),function(e){e.UpdateState="UPDATE_STATE"}(c||(c={}));var O=function(e){return E.has(e)&&E.get(e).close(1e3,"\u0418\u0433\u0440\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430"),E.delete(e)},v=n(1),x=n.n(v),h={appear:x.a["element-appear"],appearActive:x.a["element-appear-active"],appearDone:x.a["element-appear-done"],exit:x.a["element-exit"],exitActive:x.a["element-exit-active"],exitDone:x.a["element-exit-done"]},b=function(e){var t=e.type;return i.a.createElement(_.a,{in:Boolean(t),appear:!0,mountOnEnter:!0,timeout:1e3,classNames:h},i.a.createElement("div",{className:f(x.a.element,t&&x.a[t])},t?t===r.O?"O":"X":""))},g=n(8);function w(e){var t=Object(o.useState)(),n=Object(g.a)(t,2),a=n[0],r=n[1];return Object(o.useEffect)((function(){var t=function(e){return E.has(e)?E.get(e):(E.set(e,new WebSocket("".concat("ws://37.140.186.91:8000/game","/").concat(e,"/").concat(Object(d.a)()))),E.get(e))}(e);return t.onmessage=function(e){try{var t=(o=e.data,JSON.parse(o)),n=t.type,a=t.payload;n===c.UpdateState&&r(a)}catch(i){console.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0440\u0430\u0441\u043f\u0430\u0440\u0441\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",i)}var o},t.onclose=function(t){O(e),console.info("\u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0440\u044b\u0442\u043e:",t)},t.onerror=function(e){console.error("\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u044f",e)},function(){t.close(1e3,"\u0418\u0437\u043c\u0435\u043d\u0438\u043b\u0441\u044f \u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0438\u0433\u0440\u044b")}}),[e]),a}var N=n(2),X=n.n(N),y=function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},k=function(e){return[a.Lose,a.Won].includes(e)},C=function(e){var t=e.x,n=e.y,a=e.type,r=e.className,c=Object(o.useCallback)((function(){e.onClick(e.x,e.y)}),[e]);return i.a.createElement("div",{key:y(t,n,a),className:X.a.container,onClick:c},i.a.createElement("div",{className:f(X.a.element,r)},i.a.createElement(b,{type:a})))},A=function(e){var t=e.id,n=e.onGameCreate,c=w(t),l=Object(o.useCallback)((function(e,n){c&&(c.board[n][e]!==r.N||k(c.status)||function(e,t){if(!E.get(e))throw new Error("\u0438\u0433\u0440\u044b \u0441 id=".concat(e," \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442"));E.get(e).send(JSON.stringify(t))}(t,[e,n]))}),[c,t]),m=Object(o.useCallback)((function(e,t){return c?i.a.createElement(C,{key:y(e,t,c.board[t][e]),x:e,y:t,type:c.board[t][e],onClick:l,className:k(c.status)?X.a["winner-element"]:""}):null}),[c,l]),s=Object(o.useCallback)((function(){O(t),n()}),[t,n]);return i.a.createElement("div",{className:X.a.game},i.a.createElement(p,{width:3,height:3,renderElement:m}),i.a.createElement("div",{className:X.a["game-info"]},c&&k(c.status)&&i.a.createElement("div",{className:X.a.winner},c.status===a.Won?"\u0412\u044b \u043f\u043e\u0431\u0435\u0434\u0438\u043b\u0438!":"\u0412\u044b \u043f\u0440\u043e\u0438\u0433\u0440\u0430\u043b\u0438"),i.a.createElement("button",{onClick:s,className:X.a.restart},"\u0418\u0433\u0440\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e")))},G=n(4),j=n.n(G);var W=function(){var e=Object(o.useCallback)((function(){window.location.reload()}),[]);return i.a.createElement("div",{className:j.a.app},i.a.createElement("header",{className:j.a.header},"\u0412\u0435\u043b\u0438\u0447\u0430\u0439\u0448\u0430\u044f \u043f\u043e\u0431\u0435\u0434\u0430 \u2013 \u043f\u043e\u0431\u0435\u0434\u0430 \u043d\u0430\u0434 \u0441\u0430\u043c\u0438\u043c \u0441\u043e\u0431\u043e\u0439!"),i.a.createElement(A,{id:"123",onGameCreate:e}))};n(17);m.a.render(i.a.createElement(W,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.4866672d.chunk.js.map